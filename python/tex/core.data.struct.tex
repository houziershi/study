

\chapter{核心数据类型}

	在python的核数据类型中，数字、字符串、元组这三个对象是不可变的。

	\section{基本数字类型}
		
		数字对象是不可变的，许多对它的操作会生成一个新的对象返回，而不是改变原来的对象。

		\begin{verbatim}
			123, 5, 0                       # 同C语言的长整数
			999999999999L                   # 无限制长度
			1.23, 3.14e-10, 4E210, 4.0e+210 # 浮点数类似C语言双精度数
			0177, 0x13e, 0X3e               # 八进制与十六进制
			3+4j, 3.0+4.0j, 3J              # 复数，实数加上复数
		\end{verbatim}

		格式化数字：

		\lstinputlisting[firstline=1,lastline=7]{py/coreda/exnum.py}

		常用操作：加（\verb|+|）、减（\verb|-|）、乘（\verb|*|）、除（\verb|/|）、下取整（\verb|//|）、乘方（\verb|**|）、位移（\verb|>>|）等：

		\lstinputlisting[firstline=9,lastline=16]{py/coreda/exnum.py}

		调用内置的函数进行强制类型转换：

		\lstinputlisting[firstline=18,lastline=27]{py/coreda/exnum.py}

		\subsection{常用数学模块}

		\lstinputlisting{py/coreda/exmatch.py}

	\section{十进制小数类型}

		集合类型set可以支持一般的数学集合操作：

		\lstinputlisting{py/coreda/exdecimal.py}

	\section{序列类型的共同点}
		
		字符串、列表、元组都属于序列类型类型，会支持一些共同的操作。

		索引操作：

		\lstinputlisting[firstline=1,lastline=10]{py/coreda/exstr.py}

		分片操作：
		\lstinputlisting[firstline=11,lastline=17]{py/coreda/exstr.py}

		连接与重复操作会生成新的对象：
		\lstinputlisting[firstline=19,lastline=20]{py/coreda/exstr.py}

	\section{字符串类型}

		字符串也是一种序列类型，所以支持所有的序列操作。

		字符串对象是不可变的，许多对它的操作会生成一个新的对象返回，而不是改变原来的对象。

		\subsection{常用方法}

			python中的字符串使用双引号和单引号都是一样的。而且空值不会像在C语言里中断字符串。

			三重引号可以按原文格式生成文本。可以用来注释大段的代码。

			\lstinputlisting{py/coreda/exstring.py}

	\section{列表}

		列表也是一种序列类型，所以支持所有的序列操作。而且列表是可变类型。

		虽然列表没有固定大小，但是还是会越界。越界会抛出IndexError。
		
		列表常用的特定操作：

		\lstinputlisting[firstline=1,lastline=23]{py/coreda/exlist.py}

		列表可以进行嵌套，并且经常被用在多维数组上：

		\lstinputlisting[firstline=25,lastline=38]{py/coreda/exlist.py}

	\section{元组}

		元组也是一种序列类型，所以支持所有的序列操作。

		元组对象是不可变的，许多对它的操作会生成一个新的对象返回，而不是改变原来的对象。

		新建一个元组的操作：

		\begin{verbatim}
			tuple(l)
		\end{verbatim}
%		\lstinputlisting[firstline=1,lastline=12]{py/coreda/exfile.py}

	\section{字典}

		创建一个字典的方法：

		\lstinputlisting[firstline=3,lastline=14]{py/coreda/exdict.py}

		字典的常用方法：

		\lstinputlisting[firstline=18,lastline=32]{py/coreda/exdict.py}

		字典中的键不一定要用字符串，可以用任何不可变对象。不能读取一个字典中不存在的键，但可以给不存在的键设一个默认值：

		\lstinputlisting[firstline=34,lastline=36]{py/coreda/exdict.py}

		字典中的项目可以是不同的类型：

		\lstinputlisting[firstline=38,lastline=44]{py/coreda/exdict.py}

		对字典内容进行排序：

		\lstinputlisting[firstline=46,lastline=52]{py/coreda/exdict.py}

		用整数来作为字典的键，模拟一个不会越界的列表：

		\lstinputlisting[firstline=54,lastline=55]{py/coreda/exdict.py}

		用字典实现稀疏数据结构：

		\lstinputlisting[firstline=57,lastline=63]{py/coreda/exdict.py}

	\section{集合类型}

		集合类型set可以支持一般的数学集合操作：

		\lstinputlisting{py/coreda/exset.py}
		
	\section{bool类型与空}

		bool类型实际是在以定制后的逻辑来显示整数的1和0。

		None对象表示空
		
		\lstinputlisting{py/coreda/exbool.py}

		常见对象的布尔值状态：

		\begin{verbatim}
			"spam"   True
			""       False
			[]       False
			{}       False
			1        True
			0.0      False
			None     False
		\end{verbatim}

	\section{type类型}

		再次强调python中的类型信息与变量无关，类型是关联在对象上的。

		\lstinputlisting{py/coreda/extype.py}

	\section{对象的副本}

		当一个复杂的对象内部有一个引用是它自己的话，就形成了循环引用的情况。python会把循环引用的对象打印为\verb|[...]|。但是程序在处理的时候还是会造成无限循环。	

		\subsection{对象的副本}

			要为序列类对象为了建立一个用于修改的副本，用全部分片是最方便的方法：

			\lstinputlisting[firstline=1,lastline=7]{py/coreda/excopyobj.py}

			对于字典对象，有成员方法\verb|copy|：

			\lstinputlisting[firstline=9,lastline=13]{py/coreda/excopyobj.py}

			标准库中的copy可以拷贝任意对象，分只复制顶层与深层复制：

			\lstinputlisting[firstline=15,lastline=31]{py/coreda/excopyobj.py}

			序列的重复会生成新的序列：

			\lstinputlisting[firstline=47,lastline=56]{py/coreda/excopyobj.py}
		\subsection{对象的相等与同一}

			判断两个对象是否相等用“\verb|==|”操作符，判断两个对象是不是同一个对象用“\verb|is|”操作符：

			\lstinputlisting[firstline=33,lastline=41]{py/coreda/excopyobj.py}

			在\verb|sys|模块中的\verb|getrefcount|函数会返回一个对象被引用的次数：

			\lstinputlisting[firstline=43,lastline=45]{py/coreda/excopyobj.py}
