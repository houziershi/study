

%title Linux基本操作

%toc Linux基本操作


= 软件安装 =

== apt ==

=== 查看已经安装的包 ===

{{{class="brush: bash"
dpkg -l |grep openssh-server
}}}

=== 安装 ===

安装firefox

源地址：

{{{class="brush: bash"
deb http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt/ all main
}}}

加密钥并安装：

{{{class="brush: bash"
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com C1289A29
sudo apt-get update
sudo apt-get install firefox-mozilla-build
}}}

安装前记住一定要把iceweasel完全删除掉：

{{{class="brush: bash"
sudo apt-get purge iceweasel
sudo apt-get install firefox-mozilla-build
}}}

=== 安装不完全与安装损坏 ===

备份配置文件并删除相关的package记录：

{{{class="brush: bash"
sudo cp /var/lib/dpkg/status ~/backup/dpkg/
sudo vim /var/lib/dpkg/status
}}}

查找你出问题的软件包，全删除整个关于这个包的package（保证下一个package和
上一个package中间有一行空行），保存退出。

然后重新安装。 

=== 删除 ===

包括配置文件完全删除：

{{{class="brush: bash"
apt-get purge xxx
}}}

相当于：

{{{class="brush: bash"
apt-get remove --purge xxx
}}}


=== 配置默认程序优先级 ===

`update-alternatives`管理程序的优先级。如`x-www-browser`对应了多个在图形界面下
的web浏览器，默认会使用这些程序中优先级最高的：

以web浏览器的组`x-www-browser`为例。查看现在有哪些程序被定义为web浏览器，以及
它们被调用的优先级：

{{{class="brush: bash"
update-alternatives --display x-www-browser 
}}}

以web浏览器的组`x-www-browser`为例。我们新安装了firefox浏览器，
现在把它也加到这一组里：

{{{class="brush: bash"
// 格式: update-alternatives --install <配置的链接> <配置的名字> <程序路径> <整数优先级>
update-alternatives --install /usr/bin/x-www-browser x-www-browser /usr/bin/firefox 90 
}}}

以web浏览器的组`x-www-browser`为例。我们现在设置firefox为默认浏览器：

{{{class="brush: bash"
update-alternatives --config x-www-browser
}}}

上面的命令会列出所有相关的程序，输入序号选择一个默认的。


= 文件操作 =

== 散列 ==

{{{class="brush: bash"
echo "yangpan220" | md5sum
}}}

注意上面的echo会自动加上一个回车。可以用-n去掉：

{{{class="brush: bash"
echo -n 'yangpan220' | md5sum
}}}


== 压缩 ==

=== bzip2 ===

{{{class="brush: bash"
$ bzip2 -v log.txt 
  log.txt:  3.953:1,  2.024 bits/byte, 74.70% saved, 336 in, 85 out.
$ bunzip2 -v log.txt.bz2 
  log.txt.bz2: done
$ ls
log.txt
$ 
}}}

= 文本文件 =

== 查找 ==

{{{class="brush: bash"
find / -name "*.conf" | xargs grep "alias" 
}}}

== 编码与格式 ==

Windows文本文件的`^M`，注意这个`^M`的输入方式为`CTRL v CTRL m`。

使用`dos2unix`命令:

{{{class="brush: bash"
$ dos2unix myfile.txt
}}}

使用sed命令：

{{{class="brush: bash"
$ sed -e ‘s/^M/\n/g’ myfile.txt
}}}
