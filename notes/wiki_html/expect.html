<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--
<script type="text/javascript" src="../../vimwiki-theme/3rd-libs/jquery-1.4.2.min.js"></script>
-->
<script type="text/javascript" src="../../vimwiki-theme/3rd-libs/zepto-1.1.2.min.js"></script>

<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/3rd-libs/hightlight-code/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/3rd-libs/hightlight-code/styles/shThemeDefault.css"/>
<script type="text/javascript" src="../../vimwiki-theme/3rd-libs/hightlight-code/scripts/shCore.js"></script>
<script type="text/javascript" src="../../vimwiki-theme/3rd-libs/hightlight-code/scripts/shAutoloader.js"></script>

<script type="text/javascript" src="../../vimwiki-theme/3rd-libs/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="../../vimwiki-theme/templates/code-default/scripts/script.js"></script>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/templates/code-default/styles/style.css" />


<title>expect</title>
</head>
<body  onresize='changeTocSize()'>
	<div class="note-main"> 

<pre class="brush: bash">
cat ssh_test.sh
#!/bin/bash
/usr/bin/expect -c "
set timeout 10
spawn ssh root@192.168.1.1
expect "password:" {exp_send "123456"\r;}
interact"
</pre>

<p>
参数说明：
</p>

<p>
<code>set timeout</code>设置一个等待时间。
<code>spawn</code>是expect的初始命令，启动一个进程信息（需要执行的命令）。
<code>expect</code>用于匹配输出操作，当执行ssh命令后，匹配到<code>"password:"</code>。
<code>exp_send</code>后面的动作在匹配后发出。
<code>interact</code>是执行脚本中把控制权交给用户。
</p>
 </div>
</body>
</html>
