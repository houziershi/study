<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript" src="../../vimwiki-theme/code/theme/scripts/jquery-1.4.2.min.js"></script>

<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/hightlight-code/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/hightlight-code/styles/shThemeDefault.css"/>
<script type="text/javascript" src="../../vimwiki-theme/hightlight-code/scripts/shCore.js"></script>
<script type="text/javascript" src="../../vimwiki-theme/hightlight-code/scripts/shAutoloader.js"></script>

<script type="text/javascript" src="../../vimwiki-theme/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="../../vimwiki-theme/code/theme/scripts/script.js"></script>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/code/theme/styles/style.css" />


<title>查找</title>
</head>
<body  onresize='changeTocSize()'>
	<div class="note-main"> 


<h1>查找</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">whereis</a>
<li><a href="#toc_2">find</a>
<ul>
<li><a href="#toc_2.1">Basic Find Commands for Finding Files with Names</a>
<ul>
<li><a href="#toc_2.1.1">Find Files Using Name in Current Directory</a>
<li><a href="#toc_2.1.2">Find Files Under Home Directory</a>
<li><a href="#toc_2.1.3">Find Files Using Name and Ignoring Case</a>
<li><a href="#toc_2.1.4">Find Directories Using Name</a>
<li><a href="#toc_2.1.5">Find PHP Files Using Name</a>
<li><a href="#toc_2.1.6">Find all PHP Files in Directory</a>
</ul>
<li><a href="#toc_2.2">Find Files Based on their Permissions</a>
<ul>
<li><a href="#toc_2.2.1">Find Files With <code>777</code> Permissions</a>
<li><a href="#toc_2.2.2">Find Files Without 777 Permissions</a>
<li><a href="#toc_2.2.3">Find SGID Files with 644 Permissions</a>
<li><a href="#toc_2.2.4">Find Sticky Bit Files with 551 Permissions</a>
<li><a href="#toc_2.2.5">Find SUID Files</a>
<li><a href="#toc_2.2.6">Find SGID Files</a>
<li><a href="#toc_2.2.7">Find Read Only Files</a>
<li><a href="#toc_2.2.8">Find Executable Files</a>
<li><a href="#toc_2.2.9">Find Files with 777 Permissions and Chmod to 644</a>
<li><a href="#toc_2.2.10">Find Directories with 777 Permissions and Chmod to 755</a>
<li><a href="#toc_2.2.11">Find and remove single File</a>
<li><a href="#toc_2.2.12">Find and remove Multiple File</a>
<li><a href="#toc_2.2.13">Find all Empty Files</a>
<li><a href="#toc_2.2.14">Find all Empty Directories</a>
<li><a href="#toc_2.2.15">File all Hidden Files</a>
</ul>
<li><a href="#toc_2.3">Search Files Based On Owners and Groups</a>
<ul>
<li><a href="#toc_2.3.1">Find Single File Based on User</a>
<li><a href="#toc_2.3.2">Find all Files Based on User</a>
<li><a href="#toc_2.3.3">Find all Files Based on Group</a>
<li><a href="#toc_2.3.4">Find Particular Files of User</a>
</ul>
<li><a href="#toc_2.4">Find Files and Directories Based on Date and Time</a>
<ul>
<li><a href="#toc_2.4.1">Find Last 50 Days Modified Files</a>
<li><a href="#toc_2.4.2">Find Last 50 Days Accessed Files</a>
<li><a href="#toc_2.4.3">Find Last 50-100 Days Modified Files</a>
<li><a href="#toc_2.4.4">Find Changed Files in Last 1 Hour</a>
<li><a href="#toc_2.4.5">Find Modified Files in Last 1 Hour</a>
<li><a href="#toc_2.4.6">Find Accessed Files in Last 1 Hour</a>
</ul>
<li><a href="#toc_2.5">Find Files and Directories Based on Size</a>
<ul>
<li><a href="#toc_2.5.1">Find 50MB Files</a>
<li><a href="#toc_2.5.2">Find Size between 50MB – 100MB</a>
<li><a href="#toc_2.5.3">Find and Delete 100MB Files</a>
<li><a href="#toc_2.5.4">Find Specific Files and Delete</a>
</ul>
<li><a href="#toc_2.6">另一套例子</a>
<ul>
<li><a href="#toc_2.6.1">用文件名查找文件</a>
<li><a href="#toc_2.6.2">用文件名查找文件，忽略大小写</a>
<li><a href="#toc_2.6.3">限定搜索指定目录的深度</a>
<li><a href="#toc_2.6.4">在查找到的文件上执行命令</a>
<li><a href="#toc_2.6.5">相反匹配</a>
<li><a href="#toc_2.6.6">使用inode编号查找文件</a>
<li><a href="#toc_2.6.7">根据文件权限查找文件</a>
<li><a href="#toc_2.6.8">找到目录及子目录下所有空文件</a>
<li><a href="#toc_2.6.9">查找最大的文件</a>
<li><a href="#toc_2.6.10">查找最小的文件</a>
<li><a href="#toc_2.6.11">查找指定文件类型的文件</a>
<li><a href="#toc_2.6.12">通过和其他文件比较修改时间查找文件</a>
<li><a href="#toc_2.6.13">通过文件大小查找文件</a>
<li><a href="#toc_2.6.14">给常用find操作取别名</a>
<li><a href="#toc_2.6.15">删除大型打包文件</a>
</ul>
</ul>
<li><a href="#toc_3">grep</a>
</ul>
</div>

<h1 id="toc_1">whereis</h1>

<p>
<code>whereis</code>的作用是用来定位命令的二进制文件、资源或者帮助页。举例来说，获得<code>ls</code>和
<code>kill</code>命令的二进制文件/资源以及帮助页：
</p>
	
<pre class="brush: bash">
root@tecmint:~# whereis ls
ls: /bin/ls /usr/share/man/man1/ls.1.gz

root@tecmint:~# whereis kill
kill: /bin/kill /usr/share/man/man2/kill.2.gz /usr/share/man/man1/kill.1.gz
</pre>

<p>
注意：当需要知道二进制文件保存位置时有用。
</p>

<h1 id="toc_2">find</h1>

<pre class="brush: bash">
find / -name "*.conf" | xargs grep "alias" 
</pre>

<p>
搜索指定目录下的文件，从开始于父目录，然后搜索子目录。
</p>

<pre class="brush: bash">
root@tecmint:~# find -name *.sh
 
./Desktop/load.sh
./Desktop/test.sh
./Desktop/shutdown.sh
./Binary/firefox/run-mozilla.sh
./Downloads/kdewebdev-3.5.8/quanta/scripts/externalpreview.sh
./Downloads/kdewebdev-3.5.8/admin/doxygen.sh
./Downloads/kdewebdev-3.5.8/admin/cvs.sh
./Downloads/kdewebdev-3.5.8/admin/ltmain.sh
./Downloads/wheezy-nv-install.sh
</pre>

<p>
注意： <code>-name</code>选项是搜索大小写敏感。可以使用<code>-iname</code>选项，这样在搜索中可以忽略
大小写。（<code>*</code>是通配符，可以搜索所有的文件；<code>.sh</code>你可以使用文件名或者文件名的一
部分来制定输出结果）
</p>

<pre class="brush: bash">
root@tecmint:~# find -iname *.SH ( find -iname *.Sh /  find -iname *.sH)
 
./Desktop/load.sh
./Desktop/test.sh
./Desktop/shutdown.sh
./Binary/firefox/run-mozilla.sh
./Downloads/kdewebdev-3.5.8/quanta/scripts/externalpreview.sh
./Downloads/kdewebdev-3.5.8/admin/doxygen.sh
./Downloads/kdewebdev-3.5.8/admin/cvs.sh
./Downloads/kdewebdev-3.5.8/admin/ltmain.sh
./Downloads/wheezy-nv-install.sh

root@tecmint:~# find -name *.tar.gz
 
/var/www/modules/update/tests/aaa_update_test.tar.gz
./var/cache/flashplugin-nonfree/install_flash_player_11_linux.i386.tar.gz
./home/server/Downloads/drupal-7.22.tar.gz
./home/server/Downloads/smtp-7.x-1.0.tar.gz
./home/server/Downloads/noreqnewpass-7.x-1.2.tar.gz
./usr/share/gettext/archive.git.tar.gz
./usr/share/doc/apg/php.tar.gz
./usr/share/doc/festival/examples/speech_pm_1.0.tar.gz
./usr/share/doc/argyll/examples/spyder2.tar.gz
./usr/share/usb_modeswitch/configPack.tar.gz
</pre>

<p>
注意：以上命令查找根目录下和所有文件夹以及加载的设备的子目录下的所有包含<code>tar.gz</code>
的文件。
</p>

<h2 id="toc_2.1">Basic Find Commands for Finding Files with Names</h2>

<h3 id="toc_2.1.1">Find Files Using Name in Current Directory</h3>

<p>
Find all the files whose name is tecmint.txt in a current working directory.
</p>

<pre class="brush: bash">
# find . -name tecmint.txt

./tecmint.txt
</pre>

<h3 id="toc_2.1.2">Find Files Under Home Directory</h3>

<p>
Find all the files under <code>/home</code> directory with name <code>tecmint.txt</code>.
</p>

<pre class="brush: bash">
# find /home -name tecmint.txt

/home/tecmint.txt
</pre>

<h3 id="toc_2.1.3">Find Files Using Name and Ignoring Case</h3>

<p>
Find all the files whose name is <code>tecmint.txt</code> and contains both capital and 
small letters in <code>/home</code> directory.
</p>

<pre class="brush: bash">
# find /home -iname tecmint.txt

./tecmint.txt
./Tecmint.txt
</pre>

<h3 id="toc_2.1.4">Find Directories Using Name</h3>

<p>
Find all directories whose name is <code>Tecmint</code> in <code>/</code> directory.
</p>

<pre class="brush: bash">
# find / -type d -name Tecmint

/Tecmint
</pre>

<h3 id="toc_2.1.5">Find PHP Files Using Name</h3>

<p>
Find all php files whose name is <code>tecmint.php</code> in a current working directory.
</p>

<pre class="brush: bash">
# find . -type f -name tecmint.php

./tecmint.php
</pre>

<h3 id="toc_2.1.6">Find all PHP Files in Directory</h3>

<p>
Find all php files in a directory.
</p>

<pre class="brush: bash">
# find . -type f -name "*.php"

./tecmint.php
./login.php
./index.php
</pre>

<h2 id="toc_2.2">Find Files Based on their Permissions</h2>

<h3 id="toc_2.2.1">Find Files With <code>777</code> Permissions</h3>

<p>
Find all the files whose permissions are <code>777</code>.
</p>

<pre class="brush: bash">
# find . -type f -perm 0777 -print
</pre>

<h3 id="toc_2.2.2">Find Files Without 777 Permissions</h3>

<p>
Find all the files without permission <code>777</code>.
</p>

<pre class="brush: bash">
# find / -type f ! -perm 777
</pre>

<h3 id="toc_2.2.3">Find SGID Files with 644 Permissions</h3>

<p>
Find all the SGID bit files whose permissions set to <code>644</code>.
</p>

<pre class="brush: bash">
# find / -perm 2644
</pre>

<h3 id="toc_2.2.4">Find Sticky Bit Files with 551 Permissions</h3>

<p>
Find all the Sticky Bit set files whose permission are <code>551</code>.
</p>

<pre class="brush: bash">
# find / -perm 1551
</pre>

<h3 id="toc_2.2.5">Find SUID Files</h3>

<p>
Find all SUID set files.
</p>

<pre class="brush: bash">
# find / -perm /u=s
</pre>

<h3 id="toc_2.2.6">Find SGID Files</h3>

<p>
Find all SGID set files.
</p>

<pre class="brush: bash">
# find / -perm /g+s
</pre>

<h3 id="toc_2.2.7">Find Read Only Files</h3>

<p>
Find all Read Only files.
</p>

<pre class="brush: bash">
# find / -perm /u=r
</pre>

<h3 id="toc_2.2.8">Find Executable Files</h3>

<p>
Find all Executable files.
</p>

<pre class="brush: bash">
# find / -perm /a=x
</pre>

<h3 id="toc_2.2.9">Find Files with 777 Permissions and Chmod to 644</h3>

<p>
Find all <code>777</code> permission files and use chmod command to set permissions to 
<code>644</code>.
</p>

<pre class="brush: bash">
# find / -type f -perm 0777 -print -exec chmod 644 {} \;
</pre>

<h3 id="toc_2.2.10">Find Directories with 777 Permissions and Chmod to 755</h3>

<p>
Find all <code>777</code> permission directories and use chmod command to set permissions 
to <code>755</code>.
</p>

<pre class="brush: bash">
# find / -type d -perm 777 -print -exec chmod 755 {} \;
</pre>

<h3 id="toc_2.2.11">Find and remove single File</h3>

<p>
To find a single file called <code>tecmint.txt</code> and remove it.
</p>

<pre class="brush: bash">
# find . -type f -name "tecmint.txt" -exec rm -f {} \;
</pre>

<h3 id="toc_2.2.12">Find and remove Multiple File</h3>

<p>
To find and remove multiple files such as <code>.mp3</code> or <code>.txt</code>, then use.
</p>

<pre class="brush: bash">
# find . -type f -name "*.txt" -exec rm -f {} \;
</pre>

<p>
OR
</p>

<pre class="brush: bash">
# find . -type f -name "*.mp3" -exec rm -f {} \;
</pre>

<h3 id="toc_2.2.13">Find all Empty Files</h3>

<p>
To file all empty files under certain path.
</p>

<pre class="brush: bash">
# find /tmp -type f -empty
</pre>

<h3 id="toc_2.2.14">Find all Empty Directories</h3>

<p>
To file all empty directories under certain path.
</p>

<pre class="brush: bash">
# find /tmp -type d -empty
</pre>

<h3 id="toc_2.2.15">File all Hidden Files</h3>

<p>
To find all hidden files, use below command.
</p>

<pre class="brush: bash">
# find /tmp -type f -name ".*"
</pre>

<h2 id="toc_2.3">Search Files Based On Owners and Groups</h2>

<h3 id="toc_2.3.1">Find Single File Based on User</h3>

<p>
To find all or single file called <code>tecmint.txt</code> under <code>/</code> root directory of 
owner root.
</p>

<pre class="brush: bash">
# find / -user root -name tecmint.txt
</pre>

<h3 id="toc_2.3.2">Find all Files Based on User</h3>

<p>
To find all files that belongs to user Tecmint under <code>/home</code> directory.
</p>

<pre class="brush: bash">
# find /home -user tecmint
</pre>

<h3 id="toc_2.3.3">Find all Files Based on Group</h3>

<p>
To find all files that belongs to group Developer under <code>/home</code> directory.
</p>

<pre class="brush: bash">
# find /home -group developer
</pre>

<h3 id="toc_2.3.4">Find Particular Files of User</h3>

<p>
To find all <code>.txt</code> files of user Tecmint under <code>/home</code> directory.
</p>

<pre class="brush: bash">
# find /home -user tecmint -iname "*.txt"
</pre>


<h2 id="toc_2.4">Find Files and Directories Based on Date and Time</h2>

<h3 id="toc_2.4.1">Find Last 50 Days Modified Files</h3>

<p>
To find all the files which are modified 50 days back.
</p>

<pre class="brush: bash">
# find / -mtime 50
</pre>

<h3 id="toc_2.4.2">Find Last 50 Days Accessed Files</h3>

<p>
To find all the files which are accessed 50 days back.
</p>

<pre class="brush: bash">
# find / -atime 50
</pre>

<h3 id="toc_2.4.3">Find Last 50-100 Days Modified Files</h3>

<p>
To find all the files which are modified more than 50 days back and less than 
100 days.
</p>

<pre class="brush: bash">
# find / -mtime +50 –mtime -100
</pre>

<h3 id="toc_2.4.4">Find Changed Files in Last 1 Hour</h3>

<p>
To find all the files which are changed in last 1 hour.
</p>

<pre class="brush: bash">
# find / -cmin -60
</pre>

<h3 id="toc_2.4.5">Find Modified Files in Last 1 Hour</h3>

<p>
To find all the files which are modified in last 1 hour.
</p>

<pre class="brush: bash">
# find / -mmin -60
</pre>

<h3 id="toc_2.4.6">Find Accessed Files in Last 1 Hour</h3>

<p>
To find all the files which are accessed in last 1 hour.
</p>

<pre class="brush: bash">
# find / -amin -60
</pre>

<h2 id="toc_2.5">Find Files and Directories Based on Size</h2>

<h3 id="toc_2.5.1">Find 50MB Files</h3>

<p>
To find all 50MB files, use.
</p>

<pre class="brush: bash">
# find / -size 50M
</pre>

<h3 id="toc_2.5.2">Find Size between 50MB – 100MB</h3>

<p>
To find all the files which are greater than 50MB and less than 100MB.
</p>

<pre class="brush: bash">
# find / -size +50M -size -100M
</pre>

<h3 id="toc_2.5.3">Find and Delete 100MB Files</h3>

<p>
To find all 100MB files and delete them using one single command.
</p>

<pre class="brush: bash">
# find / -size +100M -exec rm -rf {} \;
</pre>

<h3 id="toc_2.5.4">Find Specific Files and Delete</h3>

<p>
Find all <code>.mp3</code> files with more than <code>10MB</code> and delete them using one single 
command.
</p>

<pre class="brush: bash">
# find / -type f -name *.mp3 -size +10M -exec ls -l {} \;
</pre>

<h2 id="toc_2.6">另一套例子</h2>

<p>
首先，在你的<code>home</code>目录下面创建下面的空文件，来测试下面的<code>find</code>命令示例：
</p>

<pre class="brush: bash" title="create_sample_files.sh">
touch mycprogram.c
touch MyCProgram.c
touch Program.c

mkdir backup
cd backup

touch MybashProgram.sh
touch mycprogram.c
touch MyCProgram.c
touch Program.c
</pre>

<p>
然后执行：
</p>

<pre class="brush: bash">
chmod +x create_sample_files.sh
./create_sample_files.sh
</pre>


<h3 id="toc_2.6.1">用文件名查找文件</h3>

<p>
用<code>MyCProgram.c</code>作为查找名在当前目录及其子目录中查找文件的方法。
</p>

<pre class="brush: bash">
# find -name "MyCProgram.c"
./backup/MyCProgram.c
./MyCProgram.c
</pre>


<h3 id="toc_2.6.2">用文件名查找文件，忽略大小写</h3>

<p>
用<code>MyCProgram.c</code>作为查找名在当前目录及其子目录中查找文件的方法，忽略了大小写。
</p>

<pre class="brush: bash">
# find -iname "MyCProgram.c"
./mycprogram.c
./backup/mycprogram.c
./backup/MyCProgram.c
./MyCProgram.c
</pre>

<h3 id="toc_2.6.3">限定搜索指定目录的深度</h3>

<p>
使用<code>mindepth</code>和<code>maxdepth</code>限定搜索指定目录的深度。
</p>

<p>
在<code>root</code>目录及其子目录下查找<code>passwd</code>文件。
</p>

<pre class="brush: bash">
# find / -name passwd
./usr/share/doc/nss_ldap-253/pam.d/passwd
./usr/bin/passwd
./etc/pam.d/passwd
./etc/passwd
</pre>


<p>
在<code>root</code>目录及其1层深的子目录中查找<code>passwd</code>. (例如root — level 1, and one 
sub-directory — level 2)
</p>

<pre class="brush: bash">
# find -maxdepth 2 -name passwd
./etc/passwd
</pre>

<p>
在<code>root</code>目录下及其最大两层深度的子目录中查找<code>passwd</code>文件. (例如 root — level 1, 
and two sub-directories — level 2 and 3 )
</p>

<pre class="brush: bash">
# find / -maxdepth 3 -name passwd
./usr/bin/passwd
./etc/pam.d/passwd
./etc/passwd
</pre>

<p>
在第二层子目录和第四层子目录之间查找<code>passwd</code>文件。
</p>

<pre class="brush: bash">
# find / -maxdepth 3 -name passwd
# find -mindepth 3 -maxdepth 5 -name passwd
./usr/bin/passwd
./etc/pam.d/passwd
</pre>


<h3 id="toc_2.6.4">在查找到的文件上执行命令</h3>

<p>
下面的例子展示了<code>find</code>命令来计算所有不区分大小写的文件名为<code>MyCProgram.c</code>的文件的
MD5验证和。
</p>

<ul>
<li>
<code>{}</code>将会被当前文件名取代。

<li>
那个<code>\</code>好像是类似转义用的，

<ul>
<li>
后面加上<code>;</code>表示命令会执行多次，每次后面都加上找到的一个文件。

<li>
后面加上<code>+</code>，表示只会执行一次命令，执行的时候把所有找到的文件一次性传给它。

</ul>
</ul>

<pre class="brush: bash">
# find -iname "MyCProgram.c" -exec md5sum {} \;
d41d8cd98f00b204e9800998ecf8427e  ./mycprogram.c
d41d8cd98f00b204e9800998ecf8427e  ./backup/mycprogram.c
d41d8cd98f00b204e9800998ecf8427e  ./backup/MyCProgram.c
d41d8cd98f00b204e9800998ecf8427e  ./MyCProgram.c
</pre>


<h3 id="toc_2.6.5">相反匹配</h3>

<p>
显示所有的名字不是<code>MyCProgram.c</code>的文件或者目录。由于<code>maxdepth</code>是1，所以只会显示
当前目录下的文件和目录。
</p>

<pre class="brush: bash">
# find -maxdepth 1 -not -iname "MyCProgram.c"
.
./MybashProgram.sh
./create_sample_files.sh
./backup
./Program.c
</pre>


<h3 id="toc_2.6.6">使用inode编号查找文件</h3>

<p>
任何一个文件都有一个独一无二的<code>inode</code>编号，借此我们可以区分文件。创建两个名字
相似的文件，例如一个有空格结尾，一个没有。
</p>

<pre class="brush: bash">
# touch "test-file-name"

# touch "test-file-name "
[Note: There is a space at the end]

# ls -1 test*
test-file-name
test-file-name
</pre>

<p>
从<code>ls</code>的输出不能区分哪个文件有空格结尾。使用选项<code>-i</code>，可以看到文件的<code>inode</code>编号
，借此可以区分这两个文件。
</p>

<pre class="brush: bash">
# ls -i1 test*
16187429 test-file-name
16187430 test-file-name
</pre>

<p>
你可以如下面所示在<code>find</code>命令中指定<code>inode</code>编号。在此，<code>find</code>命令用<code>inode</code>编号
重命名了一个文件。
</p>

<pre class="brush: bash">
# find -inum 16187430 -exec mv {} new-test-file-name \;

# ls -i1 *test*
16187430 new-test-file-name
16187429 test-file-name
</pre>


<p>
你可以在你想对那些像上面一样的糟糕命名的文件做某些操作时使用这一技术。例如，名为
<code>file?.txt</code>的文件名字中有一个特殊字符。若你想执行<code>rm file?.txt</code>，下面所示的所有
三个文件都会被删除。所以，采用下面的步骤来删除<code>file?.txt</code>文件。
</p>

<pre class="brush: bash">
# ls
file1.txt  file2.txt  file?.txt
</pre>

<p>
找到每一个文件的<code>inode</code>编号。
</p>

<pre class="brush: bash">
# ls -i1
804178 file1.txt
804179 file2.txt
804180 file?.txt
</pre>

<p>
如下所示： 使用<code>inode</code>编号来删除那些具有特殊符号的文件名。
</p>

<pre class="brush: bash">
# find -inum 804180 -exec rm {} \;

# ls
file1.txt  file2.txt
[Note: The file with name "file?.txt" is now removed]
</pre>


<h3 id="toc_2.6.7">根据文件权限查找文件</h3>

<p>
下面的操作时合理的：
</p>

<ul>
<li>
找到具有指定权限的文件

<li>
忽略其他权限位，检查是否和指定权限匹配

<li>
根据给定的八进制/符号表达的权限搜索

</ul>

<p>
此例中，假设目录包含以下文件。注意这些文件的权限不同。
</p>

<pre class="brush: bash">
# ls -l
total 0
-rwxrwxrwx 1 root root 0 2009-02-19 20:31 all_for_all
-rw-r--r-- 1 root root 0 2009-02-19 20:30 everybody_read
---------- 1 root root 0 2009-02-19 20:31 no_for_all
-rw------- 1 root root 0 2009-02-19 20:29 ordinary_file
-rw-r----- 1 root root 0 2009-02-19 20:27 others_can_also_read
----r----- 1 root root 0 2009-02-19 20:27 others_can_only_read
</pre>

<p>
找到具有组读权限的文件。使用下面的命令来找到当前目录下对同组用户具有读权限的文件
，忽略该文件的其他权限。
</p>

<pre class="brush: bash">
# find . -perm -g=r -type f -exec ls -l {} \;
-rw-r--r-- 1 root root 0 2009-02-19 20:30 ./everybody_read
-rwxrwxrwx 1 root root 0 2009-02-19 20:31 ./all_for_all
----r----- 1 root root 0 2009-02-19 20:27 ./others_can_only_read
-rw-r----- 1 root root 0 2009-02-19 20:27 ./others_can_also_read
</pre>

<p>
找到对组用户具有只读权限的文件。
</p>

<pre class="brush: bash">
# find . -perm g=r -type f -exec ls -l {} \;
----r----- 1 root root 0 2009-02-19 20:27 ./others_can_only_read
</pre>

<p>
找到对组用户具有只读权限的文件(使用八进制权限形式)。
</p>

<pre class="brush: bash">
# find . -perm 040 -type f -exec ls -l {} \;
----r----- 1 root root 0 2009-02-19 20:27 ./others_can_only_read
</pre>


<h3 id="toc_2.6.8">找到目录及子目录下所有空文件</h3>

<p>
找到<code>home</code>目录及子目录下所有的空文件(0字节文件)
</p>

<p>
下面命令的输出文件绝大多数都是锁定文件盒其他程序创建的place hoders
</p>

<pre class="brush: bash">
# find ~ -empty
</pre>

<p>
只列出你<code>home</code>目录里的空文件。
</p>

<pre class="brush: bash">
# find . -maxdepth 1 -empty
</pre>

<p>
只列出当前目录下的非隐藏空文件。
</p>

<pre class="brush: bash">
# find . -maxdepth 1 -empty -not -name ".*"
</pre>


<h3 id="toc_2.6.9">查找最大的文件</h3>

<p>
查找5个最大的文件
</p>

<p>
下面的命令列出当前目录及子目录下的5个最大的文件。这会需要一点时间，取决于命令
需要处理的文件数量。
</p>

<pre class="brush: bash">
# find . -type f -exec ls -s {} \; | sort -n -r | head -5
</pre>


<h3 id="toc_2.6.10">查找最小的文件</h3>

<p>
查找5个最小的文件
</p>

<p>
方法同查找5个最大的文件类似，区别只是sort的顺序是降序。
</p>

<pre class="brush: bash">
# find . -type f -exec ls -s {} \; | sort -n  | head -5
</pre>

<p>
上面的命令中，很可能你看到的只是空文件(0字节文件)。如此，你可以使用下面的命令
列出最小的文件，而不是0字节文件。
</p>

<pre class="brush: bash">
# find . -not -empty -type f -exec ls -s {} \; | sort -n  | head -5
</pre>


<h3 id="toc_2.6.11">查找指定文件类型的文件</h3>

<p>
使用<code>-type</code>查找指定文件类型的文件
</p>

<p>
只查找socket文件
</p>

<pre class="brush: bash">
# find . -type s
</pre>

<p>
查找所有的目录
</p>

<pre class="brush: bash">
# find . -type d
</pre>

<p>
查找所有的一般文件
</p>

<pre class="brush: bash">
# find . -type f
</pre>

<p>
查找所有的隐藏文件
</p>

<pre class="brush: bash">
# find . -type f -name ".*"
</pre>

<p>
查找所有的隐藏目录
</p>

<pre class="brush: bash">
# find -type d -name ".*"
</pre>


<h3 id="toc_2.6.12">通过和其他文件比较修改时间查找文件</h3>

<p>
显示在指定文件之后做出修改的文件。下面的<code>find</code>命令将显示所有的在<code>ordinary_file</code>
之后创建修改的文件。
</p>

<pre class="brush: bash">
# ls -lrt
total 0
-rw-r----- 1 root root 0 2009-02-19 20:27 others_can_also_read
----r----- 1 root root 0 2009-02-19 20:27 others_can_only_read
-rw------- 1 root root 0 2009-02-19 20:29 ordinary_file
-rw-r--r-- 1 root root 0 2009-02-19 20:30 everybody_read
-rwxrwxrwx 1 root root 0 2009-02-19 20:31 all_for_all
---------- 1 root root 0 2009-02-19 20:31 no_for_all
</pre>

<pre class="brush: bash">
# find -newer ordinary_file
.
./everybody_read
./all_for_all
./no_for_all
</pre>

<h3 id="toc_2.6.13">通过文件大小查找文件</h3>

<p>
使用<code>-size</code>选项可以通过文件大小查找文件。<code>– </code>指比给定尺寸小，<code>+</code>指比给定尺寸大。
没有符号代表和给定尺寸完全一样大。
</p>

<p>
查找比指定文件大的文件
</p>

<pre class="brush: bash">
# find ~ -size +100M
</pre>

<p>
查找比指定文件小的文件
</p>

<pre class="brush: bash">
# find ~ -size -100M
</pre>

<p>
查找符合给定大小的文件
</p>

<pre class="brush: bash">
# find ~ -size 100M
</pre>


<h3 id="toc_2.6.14">给常用find操作取别名</h3>

<p>
若你发现有些东西很有用，你可以给他取别名。并且在任何你希望的地方执行。
</p>

<p>
常用的删除<code>a.out</code>文件。
</p>

<pre class="brush: bash">
# alias rmao="find . -iname a.out -exec rm {} \;"
# rmao
</pre>

<p>
删除c程序产生的<code>core</code>文件。
</p>

<pre class="brush: bash">
# alias rmc="find . -iname core -exec rm {} \;"
# rmc
</pre>


<h3 id="toc_2.6.15">删除大型打包文件</h3>

<p>
下面的命令删除大于<code>100M</code>的<code>*.zip</code>文件。
</p>

<pre class="brush: bash">
# find / -type f -name *.zip -size +100M -exec rm -i {} \;"
</pre>

<p>
用别名<code>rm100m</code>删除所有大于100M的<code>*.tar</code>文件。使用同样的思想可以创建<code>rm1g</code>,<code>rm2g</code>
,<code>rm5g</code>的一类别名来删除所有大于1G,2G,5G的文件。
</p>

<pre class="brush: bash">
# alias rm100m="find / -type f -name *.tar -size +100M -exec rm -i {} \;"
# alias rm1g="find / -type f -name *.tar -size +1G -exec rm -i {} \;"
# alias rm2g="find / -type f -name *.tar -size +2G -exec rm -i {} \;"
# alias rm5g="find / -type f -name *.tar -size +5G -exec rm -i {} \;"

# rm100m
# rm1g
# rm2g
# rm5g
</pre>


<h1 id="toc_3">grep</h1>

<p>
<code>grep</code>命令搜索指定文件中包含给定字符串或者单词的行。举例搜索<code>/etc/passwd</code>文件中
的<code>tecmint</code>
</p>

<pre class="brush: bash">
root@tecmint:~# grep tecmint /etc/passwd
 
tecmint:x:1000:1000:Tecmint,,,:/home/tecmint:/bin/bash
</pre>

<p>
使用<code>-i</code>选项将忽略大小写。
</p>

<pre class="brush: bash">
root@tecmint:~# grep -i TECMINT /etc/passwd
 
tecmint:x:1000:1000:Tecmint,,,:/home/tecmint:/bin/bash
</pre>

<p>
使用<code>-r</code>选项递归搜索所有自目录下包含字符串<code>127.0.0.1</code>的行。
</p>

<pre class="brush: bash">
root@tecmint:~# grep -r "127.0.0.1" /etc/
 
/etc/vlc/lua/http/.hosts:127.0.0.1
/etc/speech-dispatcher/modules/ivona.conf:#IvonaServerHost "127.0.0.1"
/etc/mysql/my.cnf:bind-address      = 127.0.0.1
/etc/apache2/mods-available/status.conf:    Allow from 127.0.0.1 ::1
/etc/apache2/mods-available/ldap.conf:    Allow from 127.0.0.1 ::1
/etc/apache2/mods-available/info.conf:    Allow from 127.0.0.1 ::1
/etc/apache2/mods-available/proxy_balancer.conf:#    Allow from 127.0.0.1 ::1
/etc/security/access.conf:#+ : root : 127.0.0.1
/etc/dhcp/dhclient.conf:#prepend domain-name-servers 127.0.0.1;
/etc/dhcp/dhclient.conf:#  option domain-name-servers 127.0.0.1;
/etc/init/network-interface.conf:   ifconfig lo 127.0.0.1 up || true
/etc/java-6-openjdk/net.properties:# localhost &amp; 127.0.0.1).
/etc/java-6-openjdk/net.properties:# http.nonProxyHosts=localhost|127.0.0.1
/etc/java-6-openjdk/net.properties:# localhost &amp; 127.0.0.1).
/etc/java-6-openjdk/net.properties:# ftp.nonProxyHosts=localhost|127.0.0.1
/etc/hosts:127.0.0.1    localhost
</pre>

<p>
注意：您还可以使用以下选项：
</p>

<ul>
<li>
<code>-w</code>搜索单词 (<code>egrep -w ‘word1|word2‘ /path/to/file</code>).

<li>
<code>-c</code>用于统计满足要求的行 (<code>grep -c ‘word‘ /path/to/file</code>).

<li>
<code>–color</code>彩色输出 (<code>grep –color server /etc/passwd</code>).

</ul>

<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>


<pre class="brush: bash">
</pre>
 </div>
</body>
</html>
