<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript" src="../../vimwiki-theme/code/theme/scripts/jquery-1.4.2.min.js"></script>

<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/hightlight-code/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/hightlight-code/styles/shCoreRDark.css"/>
<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/hightlight-code/styles/shThemeRDark.css"/>
<script type="text/javascript" src="../../vimwiki-theme/hightlight-code/scripts/shCore.js"></script>
<script type="text/javascript" src="../../vimwiki-theme/hightlight-code/scripts/shAutoloader.js"></script>

<link type="text/css" rel="stylesheet" href="../../vimwiki-theme/code/theme/styles/style.css" />

<script type="text/javascript" src="../../vimwiki-theme/code/theme/scripts/script.js"></script>


<title>Linux基本操作</title>
</head>
<body  onresize='changeTocSize()'>
	<div class="note-main"> 



<h1>Linux基本操作</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">软件安装</a>
<ul>
<li><a href="#toc_1.1">apt</a>
<ul>
<li><a href="#toc_1.1.1">查看已经安装的包</a>
<li><a href="#toc_1.1.2">安装</a>
<li><a href="#toc_1.1.3">安装不完全与安装损坏</a>
<li><a href="#toc_1.1.4">删除</a>
<li><a href="#toc_1.1.5">配置默认程序优先级</a>
</ul>
</ul>
<li><a href="#toc_2">任务管理</a>
<li><a href="#toc_3">文件操作</a>
<ul>
<li><a href="#toc_3.1">散列</a>
<li><a href="#toc_3.2">压缩</a>
<ul>
<li><a href="#toc_3.2.1">bzip2</a>
<li><a href="#toc_3.2.2">zip</a>
</ul>
</ul>
<li><a href="#toc_4">文本文件</a>
<ul>
<li><a href="#toc_4.1">查找</a>
<li><a href="#toc_4.2">编码与格式</a>
<ul>
<li><a href="#toc_4.2.1">字符编码</a>
<li><a href="#toc_4.2.2">换行</a>
</ul>
</ul>
</ul>
</div>


<h1 id="toc_1">软件安装</h1>

<h2 id="toc_1.1">apt</h2>

<h3 id="toc_1.1.1">查看已经安装的包</h3>

<pre class="brush: bash">
dpkg -l |grep openssh-server
</pre>

<h3 id="toc_1.1.2">安装</h3>

<p>
安装firefox
</p>

<p>
源地址：
</p>

<pre class="brush: bash">
deb http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt/ all main
</pre>

<p>
加密钥并安装：
</p>

<pre class="brush: bash">
gpg --keyserver keyserver.ubuntu7.com --recv C1289A29
gpg --export --armor C1289A29 | sudo apt-key add -
</pre>

<p>
可以简写：
</p>

<pre class="brush: bash">
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com C1289A29
</pre>

<p>
安装：
</p>

<pre class="brush: bash">
sudo apt-get install firefox-mozilla-build
</pre>

<p>
安装前记住一定要把iceweasel完全删除掉：
</p>

<pre class="brush: bash">
sudo apt-get purge iceweasel
sudo apt-get install firefox-mozilla-build
</pre>

<h3 id="toc_1.1.3">安装不完全与安装损坏</h3>

<p>
备份配置文件并删除相关的package记录：
</p>

<pre class="brush: bash">
sudo cp /var/lib/dpkg/status ~/backup/dpkg/
sudo vim /var/lib/dpkg/status
</pre>

<p>
查找你出问题的软件包，全删除整个关于这个包的package（保证下一个package和
上一个package中间有一行空行），保存退出。
</p>

<p>
然后重新安装。 
</p>

<h3 id="toc_1.1.4">删除</h3>

<p>
包括配置文件完全删除：
</p>

<pre class="brush: bash">
apt-get purge xxx
</pre>

<p>
相当于：
</p>

<pre class="brush: bash">
apt-get remove --purge xxx
</pre>


<h3 id="toc_1.1.5">配置默认程序优先级</h3>

<p>
<code>update-alternatives</code>管理程序的优先级。如<code>x-www-browser</code>对应了多个在图形界面下
的web浏览器，默认会使用这些程序中优先级最高的：
</p>

<p>
以web浏览器的组<code>x-www-browser</code>为例。查看现在有哪些程序被定义为web浏览器，以及
它们被调用的优先级：
</p>

<pre class="brush: bash">
update-alternatives --display x-www-browser 
</pre>

<p>
以web浏览器的组<code>x-www-browser</code>为例。我们新安装了firefox浏览器，
现在把它也加到这一组里：
</p>

<pre class="brush: bash">
// 格式: update-alternatives --install &lt;配置的链接&gt; &lt;配置的名字&gt; &lt;程序路径&gt; &lt;整数优先级&gt;
update-alternatives --install /usr/bin/x-www-browser x-www-browser /usr/bin/firefox 90 
</pre>

<p>
以web浏览器的组<code>x-www-browser</code>为例。我们现在设置firefox为默认浏览器：
</p>

<pre class="brush: bash">
update-alternatives --config x-www-browser
</pre>

<p>
上面的命令会列出所有相关的程序，输入序号选择一个默认的。
</p>


<h1 id="toc_2">任务管理</h1>

<p>
中断任务：<code>Control + C</code>
</p>

<p>
挂起任务：<code>Control + Z</code>
</p>

<p>
显示当前任务的作业号<code>q：jobs</code>
</p>

<p>
指定任务８在后台执行
</p>
<pre class="brush: bash">
bg %8
</pre>

<p>
指定任务８在前台执行
</p>
<pre class="brush: bash">
fg %8
</pre>

<h1 id="toc_3">文件操作</h1>

<h2 id="toc_3.1">散列</h2>

<pre class="brush: bash">
echo "yangpan220" | md5sum
</pre>

<p>
注意上面的echo会自动加上一个回车。可以用-n去掉：
</p>

<pre class="brush: bash">
echo -n 'yangpan220' | md5sum
</pre>


<h2 id="toc_3.2">压缩</h2>

<h3 id="toc_3.2.1">bzip2</h3>

<pre class="brush: bash">
$ bzip2 -v log.txt 
  log.txt:  3.953:1,  2.024 bits/byte, 74.70% saved, 336 in, 85 out.
$ bunzip2 -v log.txt.bz2 
  log.txt.bz2: done
$ ls
log.txt
$ 
</pre>

<h3 id="toc_3.2.2">zip</h3>

<p>
zip命令可以用来将文件压缩成为常用的zip格式。unzip命令则用来解压缩zip文件。
</p>

<p>
1. 我想把一个文件abc.txt和一个目录dir1压缩成为yasuo.zip：
</p>
<pre class="brush: bash">
zip -r yasuo.zip abc.txt dir1
</pre>

<p>
2.我下载了一个yasuo.zip文件，想解压缩：
</p>
<pre class="brush: bash">
unzip yasuo.zip
</pre>

<p>
3.我当前目录下有abc1.zip，abc2.zip和abc3.zip，我想一起解压缩它们：
</p>
<pre class="brush: bash">
unzip abc\?.zip
// ?表示一个字符，如果用*表示任意多个字符。
</pre>


<p>
4.我有一个很大的压缩文件large.zip，我不想解压缩，只想看看它里面有什么：
</p>
<pre class="brush: bash">
unzip -v large.zip
</pre>

<p>
5.我下载了一个压缩文件large.zip，想验证一下这个压缩文件是否下载完全了：
</p>
<pre class="brush: bash">
unzip -t large.zip
</pre>

<p>
6.我用-v选项发现music.zip压缩文件里面有很多目录和子目录，并且子目录中其实都是
歌曲mp3文件，我想把这些文件都下载到第一级目录，而不是一层一层建目录：
</p>
<pre class="brush: bash">
unzip -j music.zip
</pre>

<h1 id="toc_4">文本文件</h1>

<h2 id="toc_4.1">查找</h2>

<pre class="brush: bash">
find / -name "*.conf" | xargs grep "alias" 
</pre>

<h2 id="toc_4.2">编码与格式</h2>

<h3 id="toc_4.2.1">字符编码</h3>

<p>
转换单个文件：
</p>

<pre class="brush: bash">
iconv -f GBK -t UTF-8 tt.json &gt; tt.json
</pre>

<p>
把当前目录下的文件转换编码：
</p>

<pre class="brush: bash">
sed -i "s/old/new/g" `grep old -rl ./`
</pre>

<p>
或是：
</p>

<pre class="brush: bash">
`enca -L zh_CN -x utf-8 *`
</pre>

<h3 id="toc_4.2.2">换行</h3>

<p>
Windows文本文件的<code>^M</code>，注意这个<code>^M</code>的输入方式为<code>CTRL v CTRL m</code>。
</p>

<p>
使用<code>dos2unix</code>命令:
</p>

<pre class="brush: bash">
$ dos2unix myfile.txt
</pre>

<p>
使用sed命令：
</p>

<pre class="brush: bash">
$ sed -e ‘s/^M/\n/g’ myfile.txt
</pre>
 </div>
</body>
</html>
